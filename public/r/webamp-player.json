{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "webamp-player",
  "type": "registry:component",
  "description": "A Winamp music player component using Webamp",
  "dependencies": [
    "webamp"
  ],
  "files": [
    {
      "path": "registry/components/webamp-player.tsx",
      "content": "'use client';\n\nimport Webamp from 'webamp';\n\nimport * as React from 'react';\n\nexport interface WebampTrack {\n  metaData: {\n    artist: string;\n    title: string;\n    album?: string;\n  };\n  url: string;\n  duration: number;\n}\n\nexport interface WebampPlayerProps {\n  tracks: WebampTrack[];\n  onClose?: () => void;\n  onMinimize?: () => void;\n  onFocus?: () => void;\n  initialZIndex?: number;\n  className?: string;\n}\n\nexport function WebampPlayer({\n  tracks,\n  onClose,\n  onMinimize,\n  onFocus,\n  initialZIndex = 999,\n  className,\n}: WebampPlayerProps) {\n  const containerRef = React.useRef<HTMLDivElement>(null);\n  const webampRef = React.useRef<Webamp | null>(null);\n  const [isInitialized, setIsInitialized] = React.useState(false);\n\n  // Initialize Webamp\n  React.useEffect(() => {\n    if (!Webamp.browserIsSupported() || isInitialized) {\n      return;\n    }\n\n    const options = {\n      initialTracks: tracks,\n      zIndex: initialZIndex,\n    };\n\n    const webamp = new Webamp(options);\n    webampRef.current = webamp;\n\n    // Handle close\n    webamp.onClose(() => {\n      onClose?.();\n      webamp.dispose();\n      webampRef.current = null;\n    });\n\n    // Handle minimize\n    webamp.onMinimize(() => {\n      const webampElement = document.querySelector('#webamp');\n      if (webampElement instanceof HTMLElement) {\n        webampElement.style.opacity = '0';\n        webampElement.style.pointerEvents = 'none';\n        webampElement.style.zIndex = '-1';\n      }\n      onMinimize?.();\n    });\n\n    // Render\n    if (containerRef.current) {\n      webamp.renderWhenReady(containerRef.current);\n      setIsInitialized(true);\n    }\n\n    return () => {\n      if (webampRef.current) {\n        webampRef.current.dispose();\n        webampRef.current = null;\n      }\n    };\n  }, [tracks, initialZIndex, isInitialized, onClose, onMinimize]);\n\n  // Handle focus events\n  React.useEffect(() => {\n    const handleFocus = (event: MouseEvent | TouchEvent) => {\n      const target = event.target as HTMLElement;\n      if (target.closest('#webamp') && onFocus) {\n        onFocus();\n      }\n    };\n\n    document.addEventListener('mousedown', handleFocus);\n    document.addEventListener('touchstart', handleFocus);\n\n    return () => {\n      document.removeEventListener('mousedown', handleFocus);\n      document.removeEventListener('touchstart', handleFocus);\n    };\n  }, [onFocus]);\n\n  return <div ref={containerRef} className={className} />;\n}\n\n// Utility hook for managing Webamp instance\nexport function useWebampControls() {\n  const [isMinimized, setIsMinimized] = React.useState(false);\n  const [isFocused, setIsFocused] = React.useState(false);\n\n  const restore = React.useCallback(() => {\n    const webampElement = document.querySelector('#webamp');\n    if (webampElement instanceof HTMLElement) {\n      webampElement.style.opacity = '1';\n      webampElement.style.pointerEvents = 'auto';\n      webampElement.style.zIndex = '999';\n      setIsMinimized(false);\n    }\n  }, []);\n\n  const handleMinimize = React.useCallback(() => {\n    setIsMinimized(true);\n    setIsFocused(false);\n  }, []);\n\n  const handleFocus = React.useCallback(() => {\n    setIsFocused(true);\n    if (isMinimized) {\n      restore();\n    }\n  }, [isMinimized, restore]);\n\n  return {\n    isMinimized,\n    isFocused,\n    restore,\n    handleMinimize,\n    handleFocus,\n  };\n}\n",
      "type": "registry:component"
    }
  ]
}